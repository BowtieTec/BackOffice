<div class = "panels animate__animated animate__fadeInLeft" >
  <div class = "titleCards" >
    <span ><em class = "fas fa-users" ></em ></span > Usuarios registrados en la aplicación
  </div >

  <table [dtOptions] = "dtOptions"
         [dtTrigger] = "dtTrigger"
         aria-label = "Tabla de usuarios"
         class = "table table-striped"
         datatable >
    <thead >
    <tr >
      <th class='d-none'>Id</th>
      <th scope = "col" >Nombre
      </th >
      <th scope = "col" >Email</th >
      <th scope = "col" >Teléfono</th >
      <th scope = "col" >Estado</th >
      <th scope = "col" >Tipo Registro</th >
      <th scope = "col" >Opciones</th >
    </tr >
    </thead >
    <tbody >

    <tr *ngFor = "let user of users"
        class = "animate__animated animate__fadeIn" >
      <td class='d-none'>{{user.id}}</td>
      <td >{{user.name + ' ' + (!user.last_name ? '' : user.last_name)}}</td >
      <td >{{user.email}}</td >
      <td>****-{{user.phone_number?user.phone_number.substr(-4,4) : ""}}</td>
      <td>{{getStatus(!user.status ? 0 : user.status)}}</td>
      <td> {{getRegister(user)}}</td>
      <td class = "text-right" >
        <button
                class = "buttonRowEdit me-1"
                (click)='open(contenido,user)'
                title = "Editar" ><em class = "fas fa-user-edit" ></em >
        </button >
    </tr >
    </tbody >
  </table >

  <ng-template #contenido let-modal>

          <div class="modal-header">
            <h3 class="modal-title" id="staticBackdropLabel"><span><em class='fas fa-user-edit'></em></span> Editar usuario</h3>
            <button type="button" class="btn-close"
                    (click)='modal.close()' data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <div class='row'>
                <div class='col-xl-12 col-lg-12  col-sm-12'>
                  <app-input-container
                    [formGroup]='formGroup'
                    controlName='name'
                    name='Nombre'>
                  </app-input-container>
                </div>
                <div class='col-xl-12 col-lg-12  col-sm-12'>
                  <app-input-container
                    [formGroup]='formGroup'
                    controlName='last_name'
                    name='Apellido'>
                  </app-input-container>
                </div>
                <div class='col-xl-12 col-lg-12  col-sm-12'>
                  <app-input-container
                    [formGroup]='formGroup'
                    [readonly]='isEditEmail'
                    controlName='email'
                    name='Correo'>
                  </app-input-container>
                </div>
                <div class='col-xl-12 col-lg-12  col-sm-12'>
                  <app-input-container
                  [formGroup]='formGroup'
                  controlName='phone'
                  name='Número de Télefono'
                  typeof='number'
                  >
                  </app-input-container>
                </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)='modal.close()'>Close</button>
            <button type="button" class="btn btn-primary" (click)='EditUserApp()' >Guardar</button>
          </div>

  </ng-template>

</div >
