<app-panel-sub-module icon = "fas fa-sitemap"
                      title = "Historial de uso cortesías por entrada">
  <app-input-container
    (change) = 'this.getReport()'
    [formGroup] = 'reportForm'
    [value] = "now | date: 'yyyy-MM-dd'"
    controlName = 'startDate'
    maxL = "{{now | date:'yyyy-MM-dd'}}"
    name = 'Inicio de Búsqueda'
    type = 'Date'
  ></app-input-container>
  <app-input-container
          (change) = 'this.getReport()'
          [formGroup] = 'reportForm'
          [value] = "now | date: 'yyyy-MM-dd'"
              controlName = 'endDate'
              maxL = "{{now | date:'yyyy-MM-dd'}}"
              name = 'Fin de Búsqueda'
              type = 'Date'
            ></app-input-container>
        <dx-data-grid [columnHidingEnabled] = 'false'
                      [dataSource] = 'dataSource'
                      [showBorders] = 'true'
                      class = "col-sm-12"
                      id = 'gridContainer'>
          <dxi-column
            caption = 'Fecha'
            dataField = 'ep_entry_date'
            dataType = 'date'
            format = 'dd/MM/yyyy'
            sortOrder = 'desc'
            width = 'auto'
          ></dxi-column>
          <dxi-column
            caption = 'Teléfono'
            dataField = 'phone_key'
            width = 'auto'
          ></dxi-column>
          <dxi-column *ngIf = 'isSudo'
                      caption = 'Parqueo'
                      dataField = 'p_name'
                      width = 'auto'
          ></dxi-column>
          <dxi-column
            caption = 'Cortesia Aplicada'
            dataField = 'cd_name'
            width = 'auto'
          ></dxi-column>
          <dxi-column
            caption = 'Tipo de Cortesía'
            dataField = 'tipoCortesia'
            width = 'auto'
          ></dxi-column>
          <dxi-column
            caption = 'Sub Monto'
            dataField = 'total'
            dataType = 'number'
            format = 'currency'
            format = 'Q ,###,###,##0.00'
            width = '125'
          ></dxi-column>
          <dxi-column
            caption = 'Descuento'
            dataField = 'descuento'
            dataType = 'number'
            format = 'currency'
            format = 'Q ,###,###,##0.00'
            width = '125'
          ></dxi-column>
          <dxi-column
            caption = 'Total '
            dataField = 'pagado'
            dataType = 'number'
            format = 'currency'
            format = 'Q ,###,###,##0.00'
            width = '125'
          ></dxi-column>

          <dxi-column
            [allowSorting] = 'true'
            caption = 'No. Factura'
            dataField = 'noFactura'
            type = 'text'
            width = '125'
          ></dxi-column>
          <dxo-header-filter [visible] = 'true'></dxo-header-filter>
          <dxo-search-panel [visible] = 'true'
                            placeholder = 'Buscar...'></dxo-search-panel>
          <dxo-toolbar>
            <dxi-item location = 'after'>
              <dx-button
                (onClick) = 'onExporting($event)'
                icon = 'xlsxfile'
                text = 'Exportar a Excel'
              ></dx-button>
            </dxi-item>
            <dxi-item name = 'searchPanel'></dxi-item>
          </dxo-toolbar>
          <dxo-export [enabled] = 'true'></dxo-export>
        </dx-data-grid>
</app-panel-sub-module>
