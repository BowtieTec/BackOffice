<app-panel-sub-module icon = "fas fa-sitemap"
                      title = "Mensualidades de parqueo">
  <app-input-container
    (change) = 'this.getReport()'
    [columns] = "4"
    [formGroup] = 'reportForm'
    [value] = "now | date: 'yyyy-MM-dd'"
    controlName = 'startDate'
    maxL = "{{now | date:'dd-MM-yyyy'}}"
    name = 'Inicio de Búsqueda'
    type = 'Date'
  ></app-input-container>
  <app-input-container
    (change) = 'this.getReport()'
    [columns] = "4"
    [formGroup] = 'reportForm'
    [value] = "now | date: 'yyyy-MM-dd'"
    controlName = 'endDate'
    maxL = "{{now | date:'yyyy-MM-dd'}}"
    name = 'Fin de Búsqueda'
    type = 'Date'
  ></app-input-container>
  <app-input-container
    (change) = 'this.getReport()'
    [columns] = "4"
    [formGroup] = 'reportForm'
    controlName = 'telephone'
    maxL = "13"
    minL = "8"
    name = 'Teléfono'
    type = 'number'
  ></app-input-container>
  <dx-data-grid [columnHidingEnabled] = 'false'
                [dataSource] = 'dataSource'
                [showBorders] = 'true'
                id = 'gridContainer'>
    <dxi-column
      [allowSorting] = 'true'
      caption = 'Nombre'
      dataField = 'name'
      type = 'text'
    ></dxi-column>
    <dxi-column
      [allowSorting] = 'true'
      caption = 'Teléfono'
      dataField = 'phone_number'
      type = 'text'
      width = '125'
    ></dxi-column>
    <dxi-column
      [allowSorting] = 'true'
      caption = 'Correo'
      dataField = 'email'
      type = 'text'
    ></dxi-column>
    <dxi-column
      [allowSorting] = 'true'
      caption = 'No. Factura'
      dataField = 'noInvoice'
      type = 'text'
    ></dxi-column>
    <dxi-column
      [allowSorting] = 'true'
      caption = 'Nit'
      dataField = 'nit'
      type = 'text'
    ></dxi-column>
    <dxi-column
      [allowSorting] = 'true'
      caption = 'No. Transacción'
      dataField = 'trace_number'
      type = 'text'
    ></dxi-column>
    <dxi-column
      [allowSorting] = 'true'
      caption = 'Mes pagado'
      dataField = 'month_paid'
      type = 'text'
    ></dxi-column>
    <dxi-column
      [allowSorting] = 'true'
      caption = 'Monto Pagado'
      dataField = 'amount'
      format = 'Q ,###,###,##0.00'
      type = 'currency'
      width = '90'
    ></dxi-column>
    <dxi-column
      [allowSorting] = 'true'
      caption = 'Fecha de pago'
      dataField = 'payment_date'
      type = 'text'
    ></dxi-column>
    <dxo-header-filter [visible] = 'true'></dxo-header-filter>
    <dxo-search-panel [visible] = 'true'
                      placeholder = 'Buscar...'></dxo-search-panel>
    <dxo-toolbar>
      <dxi-item location = 'after'>
        <dx-button
          (onClick) = 'onExporting($event)'
          icon = 'xlsxfile'
          text = 'Exportar a Excel'
        ></dx-button>
      </dxi-item>
      <dxi-item name = 'searchPanel'></dxi-item>
    </dxo-toolbar>
    <dxo-export [enabled] = 'true'></dxo-export>
  </dx-data-grid>
</app-panel-sub-module>
